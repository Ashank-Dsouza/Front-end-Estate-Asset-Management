{"ast":null,"code":"var _jsxFileName = \"/Users/ashankdsouza/repos/Estate Asset Management/Front-end/src/App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$();\n\nimport React, { useContext, createContext, useState } from \"react\";\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect, useHistory, useLocation } from \"react-router-dom\";\nimport LoginPage from \"./pages/LoginPage\";\nimport useToken from './auth/useToken';\nimport SignUpPage from \"./pages/singUpPage\";\nimport PasswordRecoverPage from \"./pages/PasswordRecoveryPage\";\nimport PasswordResetPage from \"./pages/PasswordReset\";\nimport MapUser from \"./pages/MapUser\";\nimport Auth from './auth/Auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  // const { token, setToken } = useToken();\n  constructor() {\n    super();\n    let authState = authentication.getAuthState();\n    this.state = {\n      auth: {\n        loggedIn: authState.userToken !== null,\n        username: authState.username,\n        userToken: authState.userToken,\n        role: authState.role\n      }\n    };\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n\n  login(username, password) {\n    return authentication.login(username, password).then(result => {\n      this.setState({\n        auth: { ...this.state.auth,\n          loggedIn: true,\n          username: result.username,\n          userToken: result.userToken,\n          role: result.role\n        }\n      });\n    }).catch(err => {\n      this._logout();\n\n      return Promise.reject(err);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(ProvideAuth, {\n      children: /*#__PURE__*/_jsxDEV(Router, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(AuthButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/public\",\n                children: \"Public Page\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/protected\",\n                children: \"Protected Page\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Switch, {\n            children: [/*#__PURE__*/_jsxDEV(Route, {\n              path: \"/public\",\n              children: /*#__PURE__*/_jsxDEV(PublicPage, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/login\",\n              component: LoginPage,\n              props: {\n                login: this.login\n              },\n              setToken: setToken\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/sign-up\",\n              component: SignUpPage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/forgot-password\",\n              component: PasswordRecoverPage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/password-reset\",\n              component: PasswordResetPage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n              path: \"/home-page\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(MapUser, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 47\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n              path: \"/protected\",\n              children: /*#__PURE__*/_jsxDEV(ProtectedPage, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }, this);\n  }\n\n}\n\nexport default App;\nconst fakeAuth = {\n  isAuthenticated: false,\n\n  signin(cb) {\n    fakeAuth.isAuthenticated = true;\n    setTimeout(cb, 100); // fake async\n  },\n\n  signout(cb) {\n    fakeAuth.isAuthenticated = false;\n    setTimeout(cb, 100);\n  }\n\n};\n/** For more details on\n * `authContext`, `ProvideAuth`, `useAuth` and `useProvideAuth`\n * refer to: https://usehooks.com/useAuth/\n */\n\nconst authContext = /*#__PURE__*/createContext();\n\nfunction ProvideAuth({\n  children\n}) {\n  _s();\n\n  const auth = useProvideAuth();\n  return /*#__PURE__*/_jsxDEV(authContext.Provider, {\n    value: auth,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProvideAuth, \"XNU4Jn8u4aVzJknlKOHFJq03xMo=\", false, function () {\n  return [useProvideAuth];\n});\n\n_c = ProvideAuth;\n\nfunction useAuth() {\n  _s2();\n\n  return useContext(authContext);\n}\n\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nfunction useProvideAuth() {\n  _s3();\n\n  const [user, setUser] = useState(null);\n\n  const signin = cb => {\n    return fakeAuth.signin(() => {\n      setUser(\"user\");\n      cb();\n    });\n  };\n\n  const signout = cb => {\n    return fakeAuth.signout(() => {\n      setUser(null);\n      cb();\n    });\n  };\n\n  return {\n    user,\n    signin,\n    signout\n  };\n}\n\n_s3(useProvideAuth, \"Iei9RGtZU29Y1RhBe1sbfh/MntA=\");\n\nfunction AuthButton() {\n  _s4();\n\n  let history = useHistory();\n  let auth = useAuth();\n  return auth.user ? /*#__PURE__*/_jsxDEV(\"p\", {\n    children: [\"Welcome!\", \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        auth.signout(() => history.push(\"/\"));\n      },\n      children: \"Sign out\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"You are not logged in.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 5\n  }, this);\n} // A wrapper for <Route> that redirects to the login\n// screen if you're not yet authenticated.\n\n\n_s4(AuthButton, \"ASTWEgtLFL6P4O5YzIF6+GA8JR8=\", false, function () {\n  return [useHistory, useAuth];\n});\n\n_c2 = AuthButton;\n\nfunction PrivateRoute({\n  children,\n  ...rest\n}) {\n  let auth = useAuth;\n  return /*#__PURE__*/_jsxDEV(Route, { ...rest,\n    render: ({\n      location\n    }) => auth.user ? children : /*#__PURE__*/_jsxDEV(Redirect, {\n      to: {\n        pathname: \"/login\",\n        state: {\n          from: location\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 5\n  }, this);\n}\n\n_c3 = PrivateRoute;\n\nfunction PublicPage() {\n  return /*#__PURE__*/_jsxDEV(\"h3\", {\n    children: \"Public\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 10\n  }, this);\n}\n\n_c4 = PublicPage;\n\nfunction ProtectedPage() {\n  return /*#__PURE__*/_jsxDEV(\"h3\", {\n    children: \"Protected\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 209,\n    columnNumber: 10\n  }, this);\n}\n\n_c5 = ProtectedPage;\n\nfunction LoginRenderPage() {\n  _s5();\n\n  let history = useHistory();\n  let location = useLocation();\n  let auth = useAuth();\n  let {\n    from\n  } = location.state || {\n    from: {\n      pathname: \"/\"\n    }\n  };\n\n  let login = () => {\n    auth.signin(() => {\n      history.replace(from);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"You must log in to view the page at \", from.pathname]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: login,\n      children: \"Log in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 11\n  }, this);\n}\n\n_s5(LoginRenderPage, \"/zEsFdP23zMwfzdKqOiUhfoKI/o=\", false, function () {\n  return [useHistory, useLocation, useAuth];\n});\n\n_c6 = LoginRenderPage;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"ProvideAuth\");\n$RefreshReg$(_c2, \"AuthButton\");\n$RefreshReg$(_c3, \"PrivateRoute\");\n$RefreshReg$(_c4, \"PublicPage\");\n$RefreshReg$(_c5, \"ProtectedPage\");\n$RefreshReg$(_c6, \"LoginRenderPage\");","map":{"version":3,"sources":["/Users/ashankdsouza/repos/Estate Asset Management/Front-end/src/App.js"],"names":["React","useContext","createContext","useState","BrowserRouter","Router","Switch","Route","Link","Redirect","useHistory","useLocation","LoginPage","useToken","SignUpPage","PasswordRecoverPage","PasswordResetPage","MapUser","Auth","App","Component","constructor","authState","authentication","getAuthState","state","auth","loggedIn","userToken","username","role","login","bind","logout","password","then","result","setState","catch","err","_logout","Promise","reject","render","setToken","fakeAuth","isAuthenticated","signin","cb","setTimeout","signout","authContext","ProvideAuth","children","useProvideAuth","useAuth","user","setUser","AuthButton","history","push","PrivateRoute","rest","location","pathname","from","PublicPage","ProtectedPage","LoginRenderPage","replace"],"mappings":"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","sourcesContent":["import React, { useContext, createContext, useState } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect,\n  useHistory,\n  useLocation\n} from \"react-router-dom\";\n\nimport LoginPage from \"./pages/LoginPage\";\nimport useToken from './auth/useToken'; \nimport SignUpPage from \"./pages/singUpPage\";\nimport PasswordRecoverPage from \"./pages/PasswordRecoveryPage\";\nimport PasswordResetPage from \"./pages/PasswordReset\";\nimport MapUser from \"./pages/MapUser\";\nimport Auth from './auth/Auth';\n\nclass  App extends React.Component {\n    // const { token, setToken } = useToken();\n    constructor () {\n        super()\n    \n        let authState = authentication.getAuthState()\n        this.state = {\n          auth: {\n            loggedIn: authState.userToken !== null,\n            username: authState.username,\n            userToken: authState.userToken,\n            role: authState.role\n          }\n        }\n    \n        this.login = this.login.bind(this)\n        this.logout = this.logout.bind(this)\n      }\n    login (username, password) {\n        return authentication.login(username, password)\n            .then(result => {\n              this.setState({\n                auth: {\n                  ...this.state.auth,\n                  loggedIn: true,\n                  username: result.username,\n                  userToken: result.userToken,\n                  role: result.role\n                }\n              })\n            })\n            .catch(err => {\n              this._logout()\n              return Promise.reject(err)\n            })\n      }\n\n      render(){\n\n  return (\n    <ProvideAuth>\n      <Router>\n        <div>\n          <AuthButton />\n\n          <ul>\n            <li>\n              <Link to=\"/public\">Public Page</Link>\n            </li>\n            <li>\n              <Link to=\"/protected\">Protected Page</Link>\n            </li>\n          </ul>\n\n          <Switch>\n            <Route path=\"/public\">\n              <PublicPage />\n            </Route>\n            \n            <Route exact path=\"/login\" component={LoginPage} props={{ login: this.login }}   setToken={setToken}>\n            </Route>\n            <Route path=\"/sign-up\" component={SignUpPage}>\n            </Route>\n            <Route path=\"/forgot-password\" component={PasswordRecoverPage}>\n            </Route>\n            <Route path=\"/password-reset\" component={PasswordResetPage}>\n            </Route>\n            <PrivateRoute path=\"/home-page\" > <MapUser/></PrivateRoute>\n\n\n            <PrivateRoute path=\"/protected\">\n              <ProtectedPage />\n            </PrivateRoute>\n          </Switch>\n        </div>\n      </Router>\n    </ProvideAuth>\n  );\n  }\n\n\n\n}\nexport default App\n\nconst fakeAuth = {\n  isAuthenticated: false,\n  signin(cb) {\n    fakeAuth.isAuthenticated = true;\n    setTimeout(cb, 100); // fake async\n  },\n  signout(cb) {\n    fakeAuth.isAuthenticated = false;\n    setTimeout(cb, 100);\n  }\n};\n\n/** For more details on\n * `authContext`, `ProvideAuth`, `useAuth` and `useProvideAuth`\n * refer to: https://usehooks.com/useAuth/\n */\nconst authContext = createContext();\n\nfunction ProvideAuth({ children }) {\n  const auth = useProvideAuth();\n  return (\n    <authContext.Provider value={auth}>\n      {children}\n    </authContext.Provider>\n  );\n}\n\nfunction useAuth() {\n  return useContext(authContext);\n}\n\nfunction useProvideAuth() {\n  const [user, setUser] = useState(null);\n\n  const signin = cb => {\n    return fakeAuth.signin(() => {\n      setUser(\"user\");\n      cb();\n    });\n  };\n\n  const signout = cb => {\n    return fakeAuth.signout(() => {\n      setUser(null);\n      cb();\n    });\n  };\n\n  return {\n    user,\n    signin,\n    signout\n  };\n}\n\nfunction AuthButton() {\n  let history = useHistory();\n  let auth = useAuth();\n\n  return auth.user ? (\n    <p>\n      Welcome!{\" \"}\n      <button\n        onClick={() => {\n          auth.signout(() => history.push(\"/\"));\n        }}\n      >\n        Sign out\n      </button>\n    </p>\n  ) : (\n    <p>You are not logged in.</p>\n  );\n}\n\n// A wrapper for <Route> that redirects to the login\n// screen if you're not yet authenticated.\nfunction PrivateRoute({ children, ...rest }) {\n  let auth = useAuth;\n  return (\n    <Route\n      {...rest}\n      render={({ location }) => \n        auth.user ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: \"/login\",\n              state: { from: location }\n            }}\n          />\n        )\n      \n      }\n    />\n  );\n}\n\nfunction PublicPage() {\n  return <h3>Public</h3>;\n}\n\nfunction ProtectedPage() {\n  return <h3>Protected</h3>;\n}\n\n    function LoginRenderPage() {\n        let history = useHistory();\n        let location = useLocation();\n        let auth = useAuth();\n      \n        let { from } = location.state || { from: { pathname: \"/\" } };\n        let login = () => {\n          auth.signin(() => {\n            history.replace(from);\n          });\n        };\n      \n        return (\n          <div>\n            <p>You must log in to view the page at {from.pathname}</p>\n            <button onClick={login}>Log in</button>\n          </div>\n        );\n      }\n\n"]},"metadata":{},"sourceType":"module"}